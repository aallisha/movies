{% extends 'movies/index.html' %}
{% load static %}

{% block content %}
    <main class="content">
        <section class="centered">
            <!--check if the context contains a 'movie_genre' or 'movie_cast'-->
            <!--which will be handled by our views-->
            {% if movie_genre %}
                <h3>{{ movie_genre|title }} Movies</h3>
                <hr>
            {% elif movie_cast %}
                <h3>{{ movie_cast.actor_name|title }}'s Movies</h3>
                <hr>
            {% endif %}

            <div class="movies">
                {% if movies_of_actor %}
                    {% for movie in movies_of_actor %}
                        <div class="mov">
                            <a href="{% url 'movies_main:movie_detail' movie.slug %}">
                                <img src="{{ movie.image.url }}">
                                <h2 class="movietitle">{{ movie.title }}</h2>
                            </a>
                        </div>
                    {% empty %}
                        <h4> There are no movies in this section. </h4>
                    {% endfor %}

                {% else %}
                    {% for movie in object_list %}
                        <div class="mov">
                            <a href="{% url 'movies_main:movie_detail' movie.slug %}">
                                <img src="{{ movie.image.url }}">
                                <h2 class="movietitle">{{ movie.title }}</h2>
                            </a>
                        </div>
                    {% empty %}
                        <h4> There are no movies in this section. </h4>
                    {% endfor %}
                {% endif %}
            </div>
            {% if is_paginated %}
                <nav class="pagination">
                    <ul>
                        {% if page_obj.has_previous %}
                            <li><a href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
                        {% else %}
                            <li class="disabled"></li>
                        {% endif %}

                        {% for pages in page_obj.paginator.page_range %}
                            <!--if this is the current page-->
                            {% if page_obj.number == pages %}
                                <!--then don't show any link-->
                                <li><a href="#">{{ pages }}</a></li>
                            {% else %}
                                <li><a href="?page={{ pages }}">{{ pages }}</a></li>
                            {% endif %}
                        {% endfor %}

                        {% if page_obj.has_next %}
                            <li><a href="?page={{ page_obj.next_page_number }}">Next</a></li>
                        {% else %}
                            <li class="disabled"></li>
                        {% endif %}
                    </ul>
                </nav>
            {% endif %}
        </section>
    </main>
{% endblock content %}
